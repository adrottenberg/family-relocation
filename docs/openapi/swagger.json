{
  "openapi": "3.0.4",
  "info": {
    "title": "FamilyRelocation API",
    "description": "API for managing Orthodox Jewish family relocation to Union County, NJ",
    "version": "v1"
  },
  "paths": {
    "/api/applicants": {
      "get": {
        "tags": [
          "Applicants"
        ],
        "summary": "Gets a paginated list of applicants with search, filter, and sort options.",
        "parameters": [
          {
            "name": "Page",
            "in": "query",
            "description": "Page number (1-based). Default: 1",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "PageSize",
            "in": "query",
            "description": "Number of items per page. Default: 20, Max: 100",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "Search",
            "in": "query",
            "description": "Search term to match against name, email, or phone.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "BoardDecision",
            "in": "query",
            "description": "Filter by board decision (Pending, Approved, Rejected, Deferred).",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "City",
            "in": "query",
            "description": "Filter by city.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "CreatedAfter",
            "in": "query",
            "description": "Filter by created date (on or after).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "CreatedBefore",
            "in": "query",
            "description": "Filter by created date (on or before).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "Stage",
            "in": "query",
            "description": "Filter by housing search stage (Searching, UnderContract, Closed, MovedIn, Paused).",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "SortBy",
            "in": "query",
            "description": "Sort field. Options: familyName, createdDate, boardReviewDate. Default: createdDate",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "SortOrder",
            "in": "query",
            "description": "Sort order. Options: asc, desc. Default: desc",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "tags": [
          "Applicants"
        ],
        "summary": "Creates a new applicant (family) and their housing search.\r\nPublicly accessible for board approval applications.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateApplicantCommand"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateApplicantCommand"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateApplicantCommand"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/applicants/{id}": {
      "get": {
        "tags": [
          "Applicants"
        ],
        "summary": "Gets an applicant by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Applicants"
        ],
        "summary": "Updates an existing applicant's basic information.\r\nCannot update: board decision, created date, applicant ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateApplicantCommand"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateApplicantCommand"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateApplicantCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Applicants"
        ],
        "summary": "Soft deletes an applicant.\r\nThe applicant will no longer appear in list or pipeline queries.",
        "description": "This is a soft delete - the applicant record remains in the database\r\nwith IsDeleted = true. The applicant can be restored if needed.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/applicants/{id}/stage": {
      "put": {
        "tags": [
          "Applicants"
        ],
        "summary": "Changes the housing search stage for an applicant.\r\nRequired fields depend on the target stage.",
        "description": "Stage transitions and required fields:\r\n- Searching: Reason optional (when returning from UnderContract/Closed if contract fell through)\r\n- Paused: Reason optional\r\n- UnderContract: Contract details required (price, optional propertyId and expectedClosingDate)\r\n- Closed: ClosingDate required\r\n- MovedIn: MovedInDate required\r\n            \r\nNote: This only applies to approved applicants with an active HousingSearch.\r\nUse PUT /api/applicants/{id}/board-review to set board decision (which creates HousingSearch on approval).\r\nUse GET /api/stage-requirements/{fromStage}/{toStage} to check required documents for transitions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangeStageRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangeStageRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ChangeStageRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/applicants/{id}/preferences": {
      "put": {
        "tags": [
          "Applicants"
        ],
        "summary": "Updates the housing preferences for an applicant's housing search.",
        "description": "Updates housing search criteria including:\r\n- Budget amount\r\n- Minimum bedrooms/bathrooms\r\n- Required features (e.g., basement, garage, yard)\r\n- Shul proximity preferences\r\n- Move timeline",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HousingPreferencesDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/HousingPreferencesDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/HousingPreferencesDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/applicants/{id}/board-review": {
      "put": {
        "tags": [
          "Applicants"
        ],
        "summary": "Sets the board's decision on an applicant and updates status accordingly.",
        "description": "Records the board's decision and automatically updates the applicant:\r\n- Approved: Sets ApplicationStatus to Approved and creates a HousingSearch in Searching stage.\r\n  Returns the new housingSearchId. Applicant can now proceed through the pipeline.\r\n- Rejected: Sets ApplicationStatus to Rejected. No HousingSearch is created. Terminal state.\r\n- Deferred: No status change. Applicant remains in Submitted status for future review.\r\n- Pending: No status change. Resets decision to pending.\r\n            \r\nCan only set decision when applicant has Submitted status.\r\nThe 'notes' field can be used for approval notes, rejection reason, or deferral reason.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetBoardDecisionRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/SetBoardDecisionRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/SetBoardDecisionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit-logs": {
      "get": {
        "tags": [
          "AuditLogs"
        ],
        "summary": "Gets a paginated list of audit log entries with optional filters.",
        "parameters": [
          {
            "name": "entityType",
            "in": "query",
            "description": "Filter by entity type (e.g., \"Applicant\", \"HousingSearch\").",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "entityId",
            "in": "query",
            "description": "Filter by specific entity ID.",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "userId",
            "in": "query",
            "description": "Filter by user who made the change.",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "action",
            "in": "query",
            "description": "Filter by action type (Added, Modified, Deleted).",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "from",
            "in": "query",
            "description": "Filter by timestamp (on or after).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "to",
            "in": "query",
            "description": "Filter by timestamp (on or before).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number (1-based). Default: 1",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Items per page. Default: 50, Max: 100",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit-logs/applicant/{applicantId}": {
      "get": {
        "tags": [
          "AuditLogs"
        ],
        "summary": "Gets audit history for a specific applicant.",
        "parameters": [
          {
            "name": "applicantId",
            "in": "path",
            "description": "The applicant ID.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number (1-based). Default: 1",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Items per page. Default: 50, Max: 100",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Authenticates a user with email and password.",
        "requestBody": {
          "description": "Login credentials.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ChallengeResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChallengeResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChallengeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/respond-to-challenge": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Responds to an authentication challenge (e.g., NEW_PASSWORD_REQUIRED, SMS_MFA).",
        "requestBody": {
          "description": "Challenge response data.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChallengeRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ChallengeRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ChallengeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ChallengeResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChallengeResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChallengeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refreshes access tokens using a valid refresh token.",
        "requestBody": {
          "description": "Refresh token request with username and token.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshTokenResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshTokenResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshTokenResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/forgot-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Initiates a password reset by sending a verification code to the user's email.",
        "requestBody": {
          "description": "Email address for password reset.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/confirm-forgot-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Completes password reset with the verification code and new password.",
        "requestBody": {
          "description": "Email, verification code, and new password.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmForgotPasswordRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmForgotPasswordRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmForgotPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/resend-confirmation": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Resends the email confirmation verification code.",
        "requestBody": {
          "description": "Email address to resend confirmation to.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResendConfirmationRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ResendConfirmationRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ResendConfirmationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/confirm-email": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Confirms a user's email address with the verification code.",
        "requestBody": {
          "description": "Email and verification code.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmEmailRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmEmailRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmEmailRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Admin-only: Register a new user with a temporary password.\r\nThe user will be required to change their password on first login.",
        "requestBody": {
          "description": "User registration details with optional temporary password.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterUserRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterUserRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterUserResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterUserResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterUserResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/applicant/{applicantId}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Gets all documents for an applicant.",
        "parameters": [
          {
            "name": "applicantId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/upload": {
      "post": {
        "tags": [
          "Documents"
        ],
        "summary": "Uploads a document to cloud storage and records it in the database.",
        "description": "Supported file types: PDF, JPEG, PNG\r\nMaximum file size: 10MB\r\n            \r\nThe documentTypeId must be a valid, active document type ID.\r\nUse GET /api/document-types to get available document types.",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "applicantId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "documentTypeId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              },
              "encoding": {
                "file": {
                  "style": "form"
                },
                "applicantId": {
                  "style": "form"
                },
                "documentTypeId": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/{id}": {
      "delete": {
        "tags": [
          "Documents"
        ],
        "summary": "Deletes a document from the database.",
        "description": "Note: This removes the database record. The file in S3 may need separate cleanup.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/presigned-url": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Gets a pre-signed URL for temporary access to a document.",
        "description": "The URL is valid for 1 hour by default.\r\nUse this to view or download documents stored in S3.",
        "parameters": [
          {
            "name": "documentKey",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "expiryMinutes",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/document-types": {
      "get": {
        "tags": [
          "DocumentTypes"
        ],
        "summary": "Gets all document types.",
        "parameters": [
          {
            "name": "activeOnly",
            "in": "query",
            "description": "If true (default), only return active document types.",
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "tags": [
          "DocumentTypes"
        ],
        "summary": "Creates a new document type.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDocumentTypeRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDocumentTypeRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDocumentTypeRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/document-types/{id}": {
      "put": {
        "tags": [
          "DocumentTypes"
        ],
        "summary": "Updates an existing document type.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDocumentTypeRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDocumentTypeRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDocumentTypeRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "DocumentTypes"
        ],
        "summary": "Deactivates (soft deletes) a document type.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/stage-requirements": {
      "get": {
        "tags": [
          "StageRequirements"
        ],
        "summary": "Gets all stage transition requirements.",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "tags": [
          "StageRequirements"
        ],
        "summary": "Creates a new stage transition requirement.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStageRequirementRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStageRequirementRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStageRequirementRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/stage-requirements/{fromStage}/{toStage}": {
      "get": {
        "tags": [
          "StageRequirements"
        ],
        "summary": "Gets document requirements for a specific stage transition.",
        "parameters": [
          {
            "name": "fromStage",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "toStage",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "applicantId",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/stage-requirements/{id}": {
      "delete": {
        "tags": [
          "StageRequirements"
        ],
        "summary": "Deletes a stage transition requirement.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddressDto": {
        "required": [
          "city",
          "state",
          "street",
          "zipCode"
        ],
        "type": "object",
        "properties": {
          "street": {
            "type": "string",
            "description": "Primary street address line.",
            "nullable": true
          },
          "street2": {
            "type": "string",
            "description": "Secondary address line (apartment, suite, etc.).",
            "nullable": true
          },
          "city": {
            "type": "string",
            "description": "City name.",
            "nullable": true
          },
          "state": {
            "type": "string",
            "description": "State abbreviation (e.g., \"NJ\").",
            "nullable": true
          },
          "zipCode": {
            "type": "string",
            "description": "ZIP or postal code.",
            "nullable": true
          },
          "fullAddress": {
            "type": "string",
            "description": "Formatted full address: \"123 Main St, Union, NJ 07083\"",
            "nullable": true,
            "readOnly": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a physical address."
      },
      "BoardDecision": {
        "enum": [
          "Pending",
          "Approved",
          "Rejected",
          "Deferred"
        ],
        "type": "string"
      },
      "ChallengeRequest": {
        "required": [
          "challengeName",
          "email",
          "session"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User's email address.",
            "nullable": true
          },
          "challengeName": {
            "type": "string",
            "description": "Type of challenge being responded to.",
            "nullable": true
          },
          "session": {
            "type": "string",
            "description": "Session token from the challenge response.",
            "nullable": true
          },
          "responses": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Challenge responses using abstracted field names:\r\n- newPassword: For NEW_PASSWORD_REQUIRED challenge\r\n- mfaCode: For SMS_MFA challenge\r\n- totpCode: For SOFTWARE_TOKEN_MFA challenge\r\n- mfaSelection: For SELECT_MFA_TYPE challenge",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to respond to an authentication challenge."
      },
      "ChallengeResponse": {
        "required": [
          "challengeName",
          "message",
          "requiredFields",
          "session"
        ],
        "type": "object",
        "properties": {
          "challengeName": {
            "type": "string",
            "description": "Type of challenge (e.g., NEW_PASSWORD_REQUIRED, SMS_MFA, SOFTWARE_TOKEN_MFA).",
            "nullable": true
          },
          "session": {
            "type": "string",
            "description": "Session token to use when responding to the challenge.",
            "nullable": true
          },
          "message": {
            "type": "string",
            "description": "Human-readable message describing the challenge.",
            "nullable": true
          },
          "requiredFields": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of field names required to respond to this challenge.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Response indicating an authentication challenge is required."
      },
      "ChangeStageRequest": {
        "required": [
          "newStage"
        ],
        "type": "object",
        "properties": {
          "newStage": {
            "type": "string",
            "description": "Target stage: Searching, Paused, UnderContract, Closed, MovedIn.",
            "nullable": true
          },
          "reason": {
            "type": "string",
            "description": "Reason for pause or contract falling through.\r\nRequired for: Paused. Optional for returning to Searching from UnderContract/Closed.",
            "nullable": true
          },
          "contract": {
            "$ref": "#/components/schemas/ContractRequest"
          },
          "closingDate": {
            "type": "string",
            "description": "Closing date. Required when transitioning to Closed.",
            "format": "date-time",
            "nullable": true
          },
          "movedInDate": {
            "type": "string",
            "description": "Move-in date. Required when transitioning to MovedIn.",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request body for changing housing search stage."
      },
      "ChildDto": {
        "required": [
          "age",
          "gender"
        ],
        "type": "object",
        "properties": {
          "age": {
            "type": "integer",
            "description": "Age of the child in years.",
            "format": "int32"
          },
          "gender": {
            "type": "string",
            "description": "Gender of the child (e.g., \"Male\", \"Female\").",
            "nullable": true
          },
          "name": {
            "type": "string",
            "description": "First name of the child.",
            "nullable": true
          },
          "school": {
            "type": "string",
            "description": "School the child currently attends.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Information about a child in the family."
      },
      "ConfirmEmailRequest": {
        "required": [
          "code",
          "email"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address to confirm.",
            "nullable": true
          },
          "code": {
            "type": "string",
            "description": "Verification code sent to the email.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to confirm a user's email address."
      },
      "ConfirmForgotPasswordRequest": {
        "required": [
          "code",
          "email",
          "newPassword"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address of the user.",
            "nullable": true
          },
          "code": {
            "type": "string",
            "description": "Verification code sent to the user's email.",
            "nullable": true
          },
          "newPassword": {
            "type": "string",
            "description": "The new password to set.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to complete a password reset with verification code."
      },
      "ContractRequest": {
        "required": [
          "price"
        ],
        "type": "object",
        "properties": {
          "propertyId": {
            "type": "string",
            "description": "Property ID (for future use when Property entity exists).",
            "format": "uuid",
            "nullable": true
          },
          "price": {
            "type": "number",
            "description": "Contract price in dollars.",
            "format": "double"
          },
          "expectedClosingDate": {
            "type": "string",
            "description": "Expected closing date.",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Contract details for putting a property under contract."
      },
      "CreateApplicantCommand": {
        "required": [
          "husband"
        ],
        "type": "object",
        "properties": {
          "husband": {
            "$ref": "#/components/schemas/HusbandInfoDto"
          },
          "wife": {
            "$ref": "#/components/schemas/SpouseInfoDto"
          },
          "address": {
            "$ref": "#/components/schemas/AddressDto"
          },
          "children": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChildDto"
            },
            "description": "List of children in the family.",
            "nullable": true
          },
          "currentKehila": {
            "type": "string",
            "description": "Current kehila/community affiliation.",
            "nullable": true
          },
          "shabbosShul": {
            "type": "string",
            "description": "Shul attended on Shabbos.",
            "nullable": true
          },
          "housingPreferences": {
            "$ref": "#/components/schemas/HousingPreferencesDto"
          }
        },
        "additionalProperties": false,
        "description": "Command to create a new applicant (family) and their housing search."
      },
      "CreateDocumentTypeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request body for creating a document type."
      },
      "CreateStageRequirementRequest": {
        "type": "object",
        "properties": {
          "fromStage": {
            "type": "string",
            "nullable": true
          },
          "toStage": {
            "type": "string",
            "nullable": true
          },
          "documentTypeId": {
            "type": "string",
            "format": "uuid"
          },
          "isRequired": {
            "type": "boolean"
          }
        },
        "additionalProperties": false,
        "description": "Request body for creating a stage requirement."
      },
      "ForgotPasswordRequest": {
        "required": [
          "email"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address of the user requesting password reset.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to initiate a password reset."
      },
      "HousingPreferencesDto": {
        "type": "object",
        "properties": {
          "budgetAmount": {
            "type": "number",
            "description": "Maximum budget amount in USD.",
            "format": "double",
            "nullable": true
          },
          "minBedrooms": {
            "type": "integer",
            "description": "Minimum number of bedrooms required.",
            "format": "int32",
            "nullable": true
          },
          "minBathrooms": {
            "type": "number",
            "description": "Minimum number of bathrooms required.",
            "format": "double",
            "nullable": true
          },
          "requiredFeatures": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of required features (e.g., \"basement\", \"garage\", \"yard\").",
            "nullable": true
          },
          "shulProximity": {
            "$ref": "#/components/schemas/ShulProximityPreferenceDto"
          },
          "moveTimeline": {
            "type": "string",
            "description": "When the family plans to move.\r\nValid values: Immediate, ShortTerm, MediumTerm, LongTerm, Extended, Flexible, NotSure, Never",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "DTO for housing preferences when creating an applicant."
      },
      "HusbandInfoDto": {
        "required": [
          "firstName",
          "lastName"
        ],
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "First name of the husband.",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "description": "Last name (family name) of the husband.",
            "nullable": true
          },
          "fatherName": {
            "type": "string",
            "description": "Father's name (for identification purposes).",
            "nullable": true
          },
          "email": {
            "type": "string",
            "description": "Email address for contact.",
            "nullable": true
          },
          "phoneNumbers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PhoneNumberDto"
            },
            "description": "List of phone numbers with type and primary designation.",
            "nullable": true
          },
          "occupation": {
            "type": "string",
            "description": "Current occupation or profession.",
            "nullable": true
          },
          "employerName": {
            "type": "string",
            "description": "Name of the current employer.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Information about the husband/primary applicant."
      },
      "LoginRequest": {
        "required": [
          "email",
          "password"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User's email address.",
            "nullable": true
          },
          "password": {
            "type": "string",
            "description": "User's password.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to authenticate a user with email and password."
      },
      "PhoneNumberDto": {
        "required": [
          "number"
        ],
        "type": "object",
        "properties": {
          "number": {
            "type": "string",
            "description": "The phone number (e.g., \"908-555-1234\").",
            "nullable": true
          },
          "type": {
            "type": "string",
            "description": "Type of phone (e.g., \"Mobile\", \"Home\", \"Work\"). Default is \"Mobile\".",
            "nullable": true
          },
          "isPrimary": {
            "type": "boolean",
            "description": "Indicates whether this is the primary contact number."
          }
        },
        "additionalProperties": false,
        "description": "Represents a phone number with type and primary designation."
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": { }
      },
      "RefreshTokenRequest": {
        "required": [
          "refreshToken",
          "username"
        ],
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "The Cognito username (sub/UUID) from the tokens. Required for computing SECRET_HASH.",
            "nullable": true
          },
          "refreshToken": {
            "type": "string",
            "description": "The refresh token from the initial login.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to refresh access tokens using a refresh token."
      },
      "RefreshTokenResponse": {
        "required": [
          "accessToken",
          "idToken"
        ],
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "New JWT access token for API authorization.",
            "nullable": true
          },
          "idToken": {
            "type": "string",
            "description": "New JWT ID token containing user claims.",
            "nullable": true
          },
          "expiresIn": {
            "type": "integer",
            "description": "Token expiration time in seconds.",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "Response containing refreshed access tokens."
      },
      "RegisterUserRequest": {
        "required": [
          "email"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address for the new user.",
            "nullable": true
          },
          "temporaryPassword": {
            "type": "string",
            "description": "Optional temporary password. If not provided, a random one will be generated.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Admin request to register a new user."
      },
      "RegisterUserResponse": {
        "required": [
          "message",
          "temporaryPassword",
          "userId"
        ],
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "Cognito user ID (sub) of the created user.",
            "nullable": true
          },
          "temporaryPassword": {
            "type": "string",
            "description": "Temporary password to share with the new user.",
            "nullable": true
          },
          "message": {
            "type": "string",
            "description": "Success message.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Response after successfully registering a new user."
      },
      "ResendConfirmationRequest": {
        "required": [
          "email"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email address to send the confirmation code to.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to resend an email confirmation code."
      },
      "SetBoardDecisionRequest": {
        "required": [
          "decision"
        ],
        "type": "object",
        "properties": {
          "decision": {
            "$ref": "#/components/schemas/BoardDecision"
          },
          "reviewDate": {
            "type": "string",
            "description": "Date of the board review. Defaults to today if not specified.",
            "format": "date-time",
            "nullable": true
          },
          "notes": {
            "type": "string",
            "description": "Optional notes from the board review.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request body for setting board decision."
      },
      "ShulProximityPreferenceDto": {
        "type": "object",
        "properties": {
          "preferredShulIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "description": "List of preferred shul IDs (optional).",
            "nullable": true
          },
          "maxWalkingDistanceMiles": {
            "type": "number",
            "description": "Maximum walking distance in miles.",
            "format": "double",
            "nullable": true
          },
          "maxWalkingTimeMinutes": {
            "type": "integer",
            "description": "Maximum walking time in minutes.",
            "format": "int32",
            "nullable": true
          },
          "anyShulAcceptable": {
            "type": "boolean",
            "description": "Whether any shul within distance is acceptable (default: true)."
          }
        },
        "additionalProperties": false,
        "description": "DTO for shul proximity preferences."
      },
      "SpouseInfoDto": {
        "required": [
          "firstName"
        ],
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "First name of the wife.",
            "nullable": true
          },
          "maidenName": {
            "type": "string",
            "description": "Maiden name (family name before marriage).",
            "nullable": true
          },
          "fatherName": {
            "type": "string",
            "description": "Father's name (for identification purposes).",
            "nullable": true
          },
          "email": {
            "type": "string",
            "description": "Email address for contact.",
            "nullable": true
          },
          "phoneNumbers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PhoneNumberDto"
            },
            "description": "List of phone numbers with type and primary designation.",
            "nullable": true
          },
          "occupation": {
            "type": "string",
            "description": "Current occupation or profession.",
            "nullable": true
          },
          "employerName": {
            "type": "string",
            "description": "Name of the current employer.",
            "nullable": true
          },
          "highSchool": {
            "type": "string",
            "description": "High school attended (for community identification).",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Information about the wife/spouse."
      },
      "UpdateApplicantCommand": {
        "required": [
          "husband",
          "id"
        ],
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the applicant to update.",
            "format": "uuid"
          },
          "husband": {
            "$ref": "#/components/schemas/HusbandInfoDto"
          },
          "wife": {
            "$ref": "#/components/schemas/SpouseInfoDto"
          },
          "address": {
            "$ref": "#/components/schemas/AddressDto"
          },
          "children": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChildDto"
            },
            "description": "Updated list of children in the family.",
            "nullable": true
          },
          "currentKehila": {
            "type": "string",
            "description": "Updated kehila/community affiliation.",
            "nullable": true
          },
          "shabbosShul": {
            "type": "string",
            "description": "Updated Shabbos shul.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Command to update an existing applicant's basic information.\r\nCannot update: board decision, created date, applicant ID."
      },
      "UpdateDocumentTypeRequest": {
        "type": "object",
        "properties": {
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request body for updating a document type."
      }
    }
  },
  "tags": [
    {
      "name": "Applicants"
    },
    {
      "name": "AuditLogs"
    },
    {
      "name": "Auth"
    },
    {
      "name": "Documents"
    },
    {
      "name": "DocumentTypes"
    },
    {
      "name": "StageRequirements"
    }
  ]
}